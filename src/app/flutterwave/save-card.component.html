<div class="save-card-container">
  <h2>Save Card for Future Payments</h2>
  <form *ngIf="!success && !otpRequired" (ngSubmit)="saveCard()">
    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="loading" class="loading">Saving card...</div>
    <label>Card Number</label>
    <input type="text" [(ngModel)]="card_number" name="card_number" maxlength="16" required autocomplete="cc-number" />
    <label>Expiry Month</label>
    <input type="text" [(ngModel)]="expiry_month" name="expiry_month" maxlength="2" required autocomplete="cc-exp-month" />
    <label>Expiry Year</label>
    <input type="text" [(ngModel)]="expiry_year" name="expiry_year" maxlength="2" required autocomplete="cc-exp-year" />
    <label>CVV</label>
    <input type="password" [(ngModel)]="cvv" name="cvv" maxlength="4" required autocomplete="cc-csc" />
    <label>PIN</label>
    <input type="password" [(ngModel)]="pin" name="pin" maxlength="4" required />
    <label>Email</label>
    <input type="email" [(ngModel)]="email" name="email" required autocomplete="email" />
    <button type="submit" [disabled]="loading">Save Card</button>
  </form>

  <div *ngIf="otpRequired && !success" class="otp-section">
    <div *ngIf="error" class="error">{{ error }}</div>
    <div *ngIf="loading" class="loading">Validating OTP...</div>
    <label>Enter OTP sent to your phone/email</label>
    <input type="text" [(ngModel)]="otp" name="otp" maxlength="6" required />
    <button (click)="submitOtp()" [disabled]="loading">Submit OTP</button>
  </div>

  <div *ngIf="success" class="success">
    Card saved successfully! You can now use this card for future payments.
  </div>
</div>
